name: autotag

on:
  push:
    branches:
      - "main"

jobs:
  tag-release:
    runs-on: ubuntu-24.04
    steps:
      -
        name: Checkout
        uses: actions/checkout@v6
      -
        name: Auto Tag
        uses: djordon/git-autotag-action@v0.6.0
        env:
          GITHUB_TOKEN: "${{ secrets.GH_PAT }}"
          VERSION_PREFIX: ""
          VERSION_COMMAND: >
            cat pyproject.toml
              | grep --extended-regexp "^version ="
              | grep --extended-regexp --only-matching "[0-9]+\.[0-9]+.[0-9]+[-\.\+a-zA-Z0-9]*"
              | head --lines=1
